<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Information Search</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/csv-export@1.1.0/dist/csv-export.min.js"></script>
</head>

<body>
    <div class="container mx-auto px-4 sm:px-6 lg:px-8 max-w-7xl">
        <!-- Title and Instructions -->
        <div class="search-section mb-8">
            <h1 class="text-3xl font-bold text-white text-center mb-4">TMHT Data Search</h1>
            <div class="bg-white/90 p-4 rounded-lg">
                <h2 class="text-lg font-semibold text-[#357d39] mb-2">How to use:</h2>
                <ul class="list-disc pl-5 text-gray-700 space-y-2">
                    <li>Type a name in the search box below to find specific records</li>
                    <li>Click the green + button in the bottom right to add new information</li>
                </ul>
            </div>
        </div>

        <!-- Stats Container -->
        <div class="stats-container">
            <div class="stats-outer-container">
                <div class="stats-grid">
                    <!-- Overall Total -->
                    <div class="stat-card">
                        <div class="stat-header" onclick="toggleStatContent(this)">
                            <h3>Overall Total</h3>
                            <span class="toggle-arrow">▼</span>
                        </div>
                        <div class="stat-content">
                            <div class="stat-details">
                                <p>Total People: <span id="totalPeople">0</span></p>
                            </div>
                        </div>
                    </div>

                    <!-- Total Boys and Girls -->
                    <div class="stat-card">
                        <div class="stat-header" onclick="toggleStatContent(this)">
                            <h3>Total Boys and Girls</h3>
                            <span class="toggle-arrow">▼</span>
                        </div>
                        <div class="stat-content">
                            <div class="stat-details">
                                <p>Boys: <span id="totalBoys">0</span></p>
                                <p>Girls: <span id="totalGirls">0</span></p>
                            </div>
                        </div>
                    </div>

                    <!-- Total People by Level -->
                    <div class="stat-card">
                        <div class="stat-header" onclick="toggleStatContent(this)">
                            <h3>Total by Level</h3>
                            <span class="toggle-arrow">▼</span>
                        </div>
                        <div class="stat-content">
                            <div class="stat-details" id="levelStats">
                                <!-- Levels will be dynamically added here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Category filter moved here -->
        <div class="category-filter">
            <select id="categoryFilter" onchange="filterByCategory(this.value)">
                <option value="all">All Entries</option>
                <option value="SHS">SHS Students</option>
                <option value="JHS">JHS Students</option>
                <option value="COMPLETED">Completed</option>
                <option value="UNIVERSITY">University</option>
            </select>
        </div>

        <!-- Search Section -->
        <div class="search-section">
            <div class="w-full max-w-2xl mx-auto">
                <input type="text" id="searchInput" placeholder="Start typing to search names..." class="w-full">
            </div>
        </div>

        <!-- Cards Container -->
        <div id="cardsContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- Cards will be dynamically added here -->
        </div>

        <!-- Add and Download Buttons -->
        <div class="fixed-buttons">
            <div class="buttons-glass-container">
                <button id="downloadButton" class="download-button" onclick="downloadCSV()">Download CSV</button>
                <button id="addButton" class="add-button">+</button>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="successToast" class="toast success">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
        </svg>
        <span>Information saved successfully!</span>
    </div>
    <div id="errorToast" class="toast error">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
        </svg>
        <span>Failed to save information. Please try again.</span>
    </div>

    <!-- Modal -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <button id="closeButton" class="close-button group bg-w">
                <svg class="fill-current text-white" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>

            <h2 id="modalTitle" class="text-2xl font-bold mb-6">Add New Information</h2>
            <form id="infoForm" class="space-y-4">
                <div class="form-group">
                    <label for="nameInput">Full Name</label>
                    <input type="text" id="nameInput" required>
                </div>
                <div class="form-group">
                    <label for="genderInput">Gender</label>
                    <select id="genderInput" required>
                        <option value="" disabled selected>Select Gender</option>
                        <option value="Male">Male</option>
                        <option value="Female">Female</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="phoneInput">Phone Number</label>
                    <input type="text" id="phoneInput">
                </div>
                <div class="form-group">
                    <label for="ageInput">Age</label>
                    <input type="number" id="ageInput" min="0">
                </div>
                <div class="form-group">
                    <label for="levelInput">Current Level</label>
                    <select id="levelInput" required>
                        <option value="" disabled selected>Select Level</option>
                        <option value="SHS1">SHS1</option>
                        <option value="SHS2">SHS2</option>
                        <option value="SHS3">SHS3</option>
                        <option value="JHS1">JHS1</option>
                        <option value="JHS2">JHS2</option>
                        <option value="JHS3">JHS3</option>
                        <option value="COMPLETED">COMPLETED</option>
                        <option value="UNIVERSITY">UNIVERSITY</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="attendance2nd">Attendance 2nd</label>
                    <select id="attendance2nd">
                        <option value="" disabled selected>Select Status</option>
                        <option value="Present">Present</option>
                        <option value="Absent">Absent</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="attendance9th">Attendance 9th</label>
                    <select id="attendance9th">
                        <option value="" disabled selected>Select Status</option>
                        <option value="Present">Present</option>
                        <option value="Absent">Absent</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="attendance16th">Attendance 16th</label>
                    <select id="attendance16th">
                        <option value="" disabled selected>Select Status</option>
                        <option value="Present">Present</option>
                        <option value="Absent">Absent</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="attendance23rd">Attendance 23rd</label>
                    <select id="attendance23rd">
                        <option value="" disabled selected>Select Status</option>
                        <option value="Present">Present</option>
                        <option value="Absent">Absent</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="button" id="cancelButton" class="cancel-button">Cancel</button>
                    <button type="submit" class="save-button">Save</button>
                </div>
            </form>
        </div>
    </div>

    <script src="app.js"></script>
</body>

</html>